"use strict";!function(){var t=function(){var t=this;t.getOptions=function(){t.container=document.querySelector(".shopList"),t.content=document.querySelector(".shopListMain__content"),t.template=document.querySelector("#shopListItem").innerHTML,t.openFooterBtn=document.querySelector(".shopListMain__open"),t.footer=document.querySelector(".shopListFooter"),t.input=document.querySelector(".shopListFooter__input"),t.shopList=[]},t.loadData=function(){var e=localStorage.getItem("shopList");e&&(t.shopList=JSON.parse(e))},t.setupListener=function(){t.openFooterBtn.addEventListener("click",t.openFooter),t.footer.addEventListener("click",t.closeFooter),t.input.addEventListener("keyup",t.handleKeyUp)},t.openFooter=function(e){e.preventDefault(),t.container.classList.add("shopList_state_add")},t.closeFooter=function(e){e.target===t.footer&&0===t.input.value.length&&t.container.classList.remove("shopList_state_add")},t.handleKeyUp=function(){var e=t.input.value,n=e.length,o=n>0?"add":"remove";t.container.classList[o]("shopList_state_valid")},t.render=function(){var e=document.createElement("ul");e.classList.add("shopListMain__list"),t.shopList.forEach(function(n){var o=document.createElement("li");o.classList.add("shopListMain__item"),o.innerHTML=t.template,o.querySelector(".shopListItem").id=n.id,o.querySelector(".shopListItem__content").innerHTML=n.title,n.isOpen&&o.classList.add("shopListItem_state_open"),e.appendChild(o)}),t.content.innerHTML="",t.content.appendChild(e)},t.updateLocalStorage=function(){var e=JSON.stringify(t.shopList);localStorage.setItem("shopList",e)},t.init=function(){t.getOptions(),t.setupListener(),t.loadData(),t.render()}},e=new t;window.addEventListener("load",function(){return e.init()}),document.addEventListener("deviceready",function(){return e.init()})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4ubWluLmpzIiwic2hvcExpc3Qvc2hvcExpc3QuanMiXSwibmFtZXMiOlsiU2hvcExpc3QiLCJzZWxmIiwidGhpcyIsImdldE9wdGlvbnMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJvcGVuRm9vdGVyQnRuIiwiZm9vdGVyIiwiaW5wdXQiLCJzaG9wTGlzdCIsImxvYWREYXRhIiwibG9jYWxEYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInNldHVwTGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlbkZvb3RlciIsImNsb3NlRm9vdGVyIiwiaGFuZGxlS2V5VXAiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwiYWRkIiwidGFyZ2V0IiwidmFsdWUiLCJsZW5ndGgiLCJyZW1vdmUiLCJtZXRob2QiLCJyZW5kZXIiLCJjb250ZW50TGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJmb3JFYWNoIiwiaXRlbSIsImVsZW1lbnQiLCJpZCIsInRpdGxlIiwiaXNPcGVuIiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGVMb2NhbFN0b3JhZ2UiLCJkYXRhIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsImluaXQiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FLQSxHQUFBQSxHQUFBLFdBQ0EsR0FBQUMsR0FBQUMsSUFLQUQsR0FBQUUsV0FBQSxXQUNBRixFQUFBRyxVQUFBQyxTQUFBQyxjQUFBLGFBQ0FMLEVBQUFNLFFBQUFGLFNBQUFDLGNBQUEsMEJBQ0FMLEVBQUFPLFNBQUFILFNBQUFDLGNBQUEsaUJBQUFHLFVBQ0FSLEVBQUFTLGNBQUFMLFNBQUFDLGNBQUEsdUJBQ0FMLEVBQUFVLE9BQUFOLFNBQUFDLGNBQUEsbUJBQ0FMLEVBQUFXLE1BQUFQLFNBQUFDLGNBQUEsMEJBQ0FMLEVBQUFZLGFBTUFaLEVBQUFhLFNBQUEsV0FDQSxHQUFBQyxHQUFBQyxhQUFBQyxRQUFBLFdBRUFGLEtBRUFkLEVBQUFZLFNBQUFLLEtBQUFDLE1BQUFKLEtBUUFkLEVBQUFtQixjQUFBLFdBQ0FuQixFQUFBUyxjQUFBVyxpQkFBQSxRQUFBcEIsRUFBQXFCLFlBQ0FyQixFQUFBVSxPQUFBVSxpQkFBQSxRQUFBcEIsRUFBQXNCLGFBQ0F0QixFQUFBVyxNQUFBUyxpQkFBQSxRQUFBcEIsRUFBQXVCLGNBT0F2QixFQUFBcUIsV0FBQSxTQUFBRyxHQUNBQSxFQUFBQyxpQkFFQXpCLEVBQUFHLFVBQUF1QixVQUFBQyxJQUFBLHVCQU9BM0IsRUFBQXNCLFlBQUEsU0FBQUUsR0FDQUEsRUFBQUksU0FBQTVCLEVBQUFVLFFBQUEsSUFBQVYsRUFBQVcsTUFBQWtCLE1BQUFDLFFBRUE5QixFQUFBRyxVQUFBdUIsVUFBQUssT0FBQSx1QkFRQS9CLEVBQUF1QixZQUFBLFdBQ0EsR0FBQU0sR0FBQTdCLEVBQUFXLE1BQUFrQixNQUNBQyxFQUFBRCxFQUFBQyxPQUNBRSxFQUFBRixFQUFBLEVBQUEsTUFBQSxRQUVBOUIsR0FBQUcsVUFBQXVCLFVBQUFNLEdBQUEseUJBTUFoQyxFQUFBaUMsT0FBQSxXQUNBLEdBQUFDLEdBQUE5QixTQUFBK0IsY0FBQSxLQUVBRCxHQUFBUixVQUFBQyxJQUFBLHNCQUVBM0IsRUFBQVksU0FBQXdCLFFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBbEMsU0FBQStCLGNBQUEsS0FFQUcsR0FBQVosVUFBQUMsSUFBQSxzQkFDQVcsRUFBQTlCLFVBQUFSLEVBQUFPLFNBRUErQixFQUFBakMsY0FBQSxpQkFBQWtDLEdBQUFGLEVBQUFFLEdBQ0FELEVBQUFqQyxjQUFBLDBCQUFBRyxVQUFBNkIsRUFBQUcsTUFFQUgsRUFBQUksUUFFQUgsRUFBQVosVUFBQUMsSUFBQSwyQkFJQU8sRUFBQVEsWUFBQUosS0FHQXRDLEVBQUFNLFFBQUFFLFVBQUEsR0FFQVIsRUFBQU0sUUFBQW9DLFlBQUFSLElBTUFsQyxFQUFBMkMsbUJBQUEsV0FDQSxHQUFBQyxHQUFBM0IsS0FBQTRCLFVBQUE3QyxFQUFBWSxTQUVBRyxjQUFBK0IsUUFBQSxXQUFBRixJQU1BNUMsRUFBQStDLEtBQUEsV0FDQS9DLEVBQUFFLGFBQ0FGLEVBQUFtQixnQkFDQW5CLEVBQUFhLFdBQ0FiLEVBQUFpQyxXQUlBckIsRUFBQSxHQUFBYixFQUVBaUQsUUFBQTVCLGlCQUFBLE9BQUEsV0FBQSxNQUFBUixHQUFBbUMsU0FDQTNDLFNBQUFnQixpQkFBQSxjQUFBLFdBQUEsTUFBQVIsR0FBQW1DIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2hvcExpc3QgY2xhc3MuXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgdmFyIFNob3BMaXN0ID0gZnVuY3Rpb24gU2hvcExpc3QoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IG9wdGlvbnMgZm9yIG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5nZXRPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3QnKTtcbiAgICAgICAgICAgIHNlbGYuY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdE1haW5fX2NvbnRlbnQnKTtcbiAgICAgICAgICAgIHNlbGYudGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvcExpc3RJdGVtJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgc2VsZi5vcGVuRm9vdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0TWFpbl9fb3BlbicpO1xuICAgICAgICAgICAgc2VsZi5mb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RGb290ZXInKTtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RGb290ZXJfX2lucHV0Jyk7XG4gICAgICAgICAgICBzZWxmLnNob3BMaXN0ID0gW107XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIHRoZXJlIGRhdGEgaW4gbG9jYWwgc3RvcmFnZSBhbmQgbG9hZCBpdFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5sb2FkRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsb2NhbERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2hvcExpc3QnKTtcblxuICAgICAgICAgICAgaWYgKGxvY2FsRGF0YSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zaG9wTGlzdCA9IEpTT04ucGFyc2UobG9jYWxEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50cyBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYub3BlbkZvb3RlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYub3BlbkZvb3Rlcik7XG4gICAgICAgICAgICBzZWxmLmZvb3Rlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYuY2xvc2VGb290ZXIpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHNlbGYuaGFuZGxlS2V5VXApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IGZvb3RlciB3aXRoIGlucHV0IGZpZWxkXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5vcGVuRm9vdGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzaG9wTGlzdF9zdGF0ZV9hZGQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xvc2UgZm9vdGVyIGlmIGNsaWNrIG91dHNpZGUgb2YgZm9vdGVyIGlucHV0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5jbG9zZUZvb3RlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gc2VsZi5mb290ZXIgJiYgc2VsZi5pbnB1dC52YWx1ZS5sZW5ndGggPT09IDApIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3BMaXN0X3N0YXRlX2FkZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiBpbnB1dCB2YWx1ZSBsZW5ndGggPiAwIGFuZCBjaGFuZ2UgY29udGFpbmVyIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmhhbmRsZUtleVVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2VsZi5pbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gbGVuZ3RoID4gMCA/ICdhZGQnIDogJ3JlbW92ZSc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdFttZXRob2RdKCdzaG9wTGlzdF9zdGF0ZV92YWxpZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXIgc2hvcCBsaXN0XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG5cbiAgICAgICAgICAgIGNvbnRlbnRMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0TWFpbl9fbGlzdCcpO1xuXG4gICAgICAgICAgICBzZWxmLnNob3BMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0TWFpbl9faXRlbScpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc2VsZi50ZW1wbGF0ZTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0SXRlbScpLmlkID0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEl0ZW1fX2NvbnRlbnQnKS5pbm5lckhUTUwgPSBpdGVtLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNPcGVuKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaG9wTGlzdEl0ZW1fc3RhdGVfb3BlbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRlbnRMaXN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnRMaXN0KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYudXBkYXRlTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeShzZWxmLnNob3BMaXN0KTtcblxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nob3BMaXN0JywgZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuICAgICAgICAgICAgc2VsZi5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgc2VsZi5yZW5kZXIoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIHNob3BMaXN0ID0gbmV3IFNob3BMaXN0KCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNob3BMaXN0LmluaXQoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNob3BMaXN0LmluaXQoKTtcbiAgICB9KTtcbn0pKCk7IiwiKCgpID0+IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNob3BMaXN0IGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIGNvbnN0IFNob3BMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3B0aW9ucyBmb3IgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldE9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdCcpO1xuICAgICAgICAgICAgc2VsZi5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0TWFpbl9fY29udGVudCcpO1xuICAgICAgICAgICAgc2VsZi50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG9wTGlzdEl0ZW0nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBzZWxmLm9wZW5Gb290ZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RNYWluX19vcGVuJyk7XG4gICAgICAgICAgICBzZWxmLmZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEZvb3RlcicpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEZvb3Rlcl9faW5wdXQnKTtcbiAgICAgICAgICAgIHNlbGYuc2hvcExpc3QgPSBbXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgdGhlcmUgZGF0YSBpbiBsb2NhbCBzdG9yYWdlIGFuZCBsb2FkIGl0XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmxvYWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2hvcExpc3QnKTtcblxuICAgICAgICAgICAgaWYgKGxvY2FsRGF0YSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5zaG9wTGlzdCA9IEpTT04ucGFyc2UobG9jYWxEYXRhKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnRzIGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgc2VsZi5vcGVuRm9vdGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5vcGVuRm9vdGVyKTtcbiAgICAgICAgICAgIHNlbGYuZm9vdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5jbG9zZUZvb3Rlcik7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgc2VsZi5oYW5kbGVLZXlVcCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgZm9vdGVyIHdpdGggaW5wdXQgZmllbGRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLm9wZW5Gb290ZXIgPSBldmVudCA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzaG9wTGlzdF9zdGF0ZV9hZGQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xvc2UgZm9vdGVyIGlmIGNsaWNrIG91dHNpZGUgb2YgZm9vdGVyIGlucHV0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5jbG9zZUZvb3RlciA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHNlbGYuZm9vdGVyICYmIHNlbGYuaW5wdXQudmFsdWUubGVuZ3RoID09PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzaG9wTGlzdF9zdGF0ZV9hZGQnKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiBpbnB1dCB2YWx1ZSBsZW5ndGggPiAwIGFuZCBjaGFuZ2UgY29udGFpbmVyIHN0YXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmhhbmRsZUtleVVwID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzZWxmLmlucHV0LnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gbGVuZ3RoID4gMCA/ICdhZGQnIDogJ3JlbW92ZSc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdFttZXRob2RdKCdzaG9wTGlzdF9zdGF0ZV92YWxpZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXIgc2hvcCBsaXN0XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgICAgICBjb250ZW50TGlzdC5jbGFzc0xpc3QuYWRkKCdzaG9wTGlzdE1haW5fX2xpc3QnKTtcblxuICAgICAgICAgICAgc2VsZi5zaG9wTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hvcExpc3RNYWluX19pdGVtJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzZWxmLnRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RJdGVtJykuaWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0SXRlbV9fY29udGVudCcpLmlubmVySFRNTCA9IGl0ZW0udGl0bGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc09wZW4pIHtcblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0SXRlbV9zdGF0ZV9vcGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZW50TGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50TGlzdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnVwZGF0ZUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHNlbGYuc2hvcExpc3QpO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2hvcExpc3QnLCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyKCk7XG4gICAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7XG4gICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCBzaG9wTGlzdCA9IG5ldyBTaG9wTGlzdCgpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBzaG9wTGlzdC5pbml0KCkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4gc2hvcExpc3QuaW5pdCgpKTtcbn0pKCk7XG4iXX0=
