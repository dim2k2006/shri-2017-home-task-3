"use strict";!function(){var t=function(){var t=this;t.getOptions=function(){t.container=document.querySelector(".shopList"),t.content=document.querySelector(".shopListMain__content"),t.template=document.querySelector("#shopListItem").innerHTML,t.openFooterBtn=document.querySelector(".shopListMain__open"),t.footer=document.querySelector(".shopListFooter"),t.input=document.querySelector(".shopListFooter__input"),t.form=document.querySelector(".shopListFooter__form"),t.shopList=[]},t.loadData=function(){var e=localStorage.getItem("shopList");e&&(t.shopList=JSON.parse(e))},t.setupListener=function(){t.openFooterBtn.addEventListener("click",t.openFooter),t.footer.addEventListener("click",t.closeFooter),t.input.addEventListener("keyup",t.handleKeyUp),t.form.addEventListener("submit",t.submit)},t.openFooter=function(e){e.preventDefault(),t.container.classList.add("shopList_state_add")},t.closeFooter=function(e){e.target===t.footer&&0===t.input.value.length&&t.container.classList.remove("shopList_state_add")},t.handleKeyUp=function(){var e=t.input.value,n=e.length,o=n>0?"add":"remove";t.container.classList[o]("shopList_state_valid")},t.submit=function(e){e.preventDefault();var n=t.input.value,o=n.length;if(0===o)return!1;var i=t.shopList.length,s=0===i?0:i+1,r=!1;t.shopList.push({id:s,title:n,isOpen:r}),t.reset(),t.render(),t.updateLocalStorage()},t.reset=function(){t.form.reset()},t.render=function(){var e=document.createElement("ul");e.classList.add("shopListMain__list"),t.shopList.forEach(function(n){var o=document.createElement("li");o.classList.add("shopListMain__item"),o.innerHTML=t.template,o.querySelector(".shopListItem").id=n.id,o.querySelector(".shopListItem__content").innerHTML=n.title,n.isOpen&&o.classList.add("shopListItem_state_open"),e.appendChild(o)}),t.content.innerHTML="",t.content.appendChild(e)},t.updateLocalStorage=function(){var e=JSON.stringify(t.shopList);localStorage.setItem("shopList",e)},t.init=function(){t.getOptions(),t.setupListener(),t.loadData(),t.render()}},e=new t;window.addEventListener("load",function(){return e.init()}),document.addEventListener("deviceready",function(){return e.init()})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4ubWluLmpzIiwic2hvcExpc3Qvc2hvcExpc3QuanMiXSwibmFtZXMiOlsiU2hvcExpc3QiLCJzZWxmIiwidGhpcyIsImdldE9wdGlvbnMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJvcGVuRm9vdGVyQnRuIiwiZm9vdGVyIiwiaW5wdXQiLCJmb3JtIiwic2hvcExpc3QiLCJsb2FkRGF0YSIsImxvY2FsRGF0YSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzZXR1cExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wZW5Gb290ZXIiLCJjbG9zZUZvb3RlciIsImhhbmRsZUtleVVwIiwic3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsImFkZCIsInRhcmdldCIsInZhbHVlIiwibGVuZ3RoIiwicmVtb3ZlIiwibWV0aG9kIiwic2hvcExpc3RMZW5ndGgiLCJpZCIsImlzT3BlbiIsInB1c2giLCJ0aXRsZSIsInJlc2V0IiwicmVuZGVyIiwidXBkYXRlTG9jYWxTdG9yYWdlIiwiY29udGVudExpc3QiLCJjcmVhdGVFbGVtZW50IiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJkYXRhIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsImluaXQiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FLQSxHQUFBQSxHQUFBLFdBQ0EsR0FBQUMsR0FBQUMsSUFLQUQsR0FBQUUsV0FBQSxXQUNBRixFQUFBRyxVQUFBQyxTQUFBQyxjQUFBLGFBQ0FMLEVBQUFNLFFBQUFGLFNBQUFDLGNBQUEsMEJBQ0FMLEVBQUFPLFNBQUFILFNBQUFDLGNBQUEsaUJBQUFHLFVBQ0FSLEVBQUFTLGNBQUFMLFNBQUFDLGNBQUEsdUJBQ0FMLEVBQUFVLE9BQUFOLFNBQUFDLGNBQUEsbUJBQ0FMLEVBQUFXLE1BQUFQLFNBQUFDLGNBQUEsMEJBQ0FMLEVBQUFZLEtBQUFSLFNBQUFDLGNBQUEseUJBQ0FMLEVBQUFhLGFBTUFiLEVBQUFjLFNBQUEsV0FDQSxHQUFBQyxHQUFBQyxhQUFBQyxRQUFBLFdBRUFGLEtBRUFmLEVBQUFhLFNBQUFLLEtBQUFDLE1BQUFKLEtBUUFmLEVBQUFvQixjQUFBLFdBQ0FwQixFQUFBUyxjQUFBWSxpQkFBQSxRQUFBckIsRUFBQXNCLFlBQ0F0QixFQUFBVSxPQUFBVyxpQkFBQSxRQUFBckIsRUFBQXVCLGFBQ0F2QixFQUFBVyxNQUFBVSxpQkFBQSxRQUFBckIsRUFBQXdCLGFBQ0F4QixFQUFBWSxLQUFBUyxpQkFBQSxTQUFBckIsRUFBQXlCLFNBT0F6QixFQUFBc0IsV0FBQSxTQUFBSSxHQUNBQSxFQUFBQyxpQkFFQTNCLEVBQUFHLFVBQUF5QixVQUFBQyxJQUFBLHVCQU9BN0IsRUFBQXVCLFlBQUEsU0FBQUcsR0FDQUEsRUFBQUksU0FBQTlCLEVBQUFVLFFBQUEsSUFBQVYsRUFBQVcsTUFBQW9CLE1BQUFDLFFBRUFoQyxFQUFBRyxVQUFBeUIsVUFBQUssT0FBQSx1QkFRQWpDLEVBQUF3QixZQUFBLFdBQ0EsR0FBQU8sR0FBQS9CLEVBQUFXLE1BQUFvQixNQUNBQyxFQUFBRCxFQUFBQyxPQUNBRSxFQUFBRixFQUFBLEVBQUEsTUFBQSxRQUVBaEMsR0FBQUcsVUFBQXlCLFVBQUFNLEdBQUEseUJBT0FsQyxFQUFBeUIsT0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFFQSxJQUFBSSxHQUFBL0IsRUFBQVcsTUFBQW9CLE1BQ0FDLEVBQUFELEVBQUFDLE1BRUEsSUFBQSxJQUFBQSxFQUVBLE9BQUEsQ0FJQSxJQUFBRyxHQUFBbkMsRUFBQWEsU0FBQW1CLE9BQ0FJLEVBQUEsSUFBQUQsRUFBQSxFQUFBQSxFQUFBLEVBQ0FFLEdBQUEsQ0FFQXJDLEdBQUFhLFNBQUF5QixNQUNBRixHQUFBQSxFQUNBRyxNQUFBUixFQUNBTSxPQUFBQSxJQUdBckMsRUFBQXdDLFFBQ0F4QyxFQUFBeUMsU0FDQXpDLEVBQUEwQyxzQkFNQTFDLEVBQUF3QyxNQUFBLFdBQ0F4QyxFQUFBWSxLQUFBNEIsU0FNQXhDLEVBQUF5QyxPQUFBLFdBQ0EsR0FBQUUsR0FBQXZDLFNBQUF3QyxjQUFBLEtBRUFELEdBQUFmLFVBQUFDLElBQUEsc0JBRUE3QixFQUFBYSxTQUFBZ0MsUUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEzQyxTQUFBd0MsY0FBQSxLQUVBRyxHQUFBbkIsVUFBQUMsSUFBQSxzQkFDQWtCLEVBQUF2QyxVQUFBUixFQUFBTyxTQUVBd0MsRUFBQTFDLGNBQUEsaUJBQUErQixHQUFBVSxFQUFBVixHQUNBVyxFQUFBMUMsY0FBQSwwQkFBQUcsVUFBQXNDLEVBQUFQLE1BRUFPLEVBQUFULFFBRUFVLEVBQUFuQixVQUFBQyxJQUFBLDJCQUlBYyxFQUFBSyxZQUFBRCxLQUdBL0MsRUFBQU0sUUFBQUUsVUFBQSxHQUVBUixFQUFBTSxRQUFBMEMsWUFBQUwsSUFNQTNDLEVBQUEwQyxtQkFBQSxXQUNBLEdBQUFPLEdBQUEvQixLQUFBZ0MsVUFBQWxELEVBQUFhLFNBRUFHLGNBQUFtQyxRQUFBLFdBQUFGLElBTUFqRCxFQUFBb0QsS0FBQSxXQUNBcEQsRUFBQUUsYUFDQUYsRUFBQW9CLGdCQUNBcEIsRUFBQWMsV0FDQWQsRUFBQXlDLFdBSUE1QixFQUFBLEdBQUFkLEVBRUFzRCxRQUFBaEMsaUJBQUEsT0FBQSxXQUFBLE1BQUFSLEdBQUF1QyxTQUNBaEQsU0FBQWlCLGlCQUFBLGNBQUEsV0FBQSxNQUFBUixHQUFBdUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaG9wTGlzdCBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgU2hvcExpc3QgPSBmdW5jdGlvbiBTaG9wTGlzdCgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgb3B0aW9ucyBmb3IgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdCcpO1xuICAgICAgICAgICAgc2VsZi5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0TWFpbl9fY29udGVudCcpO1xuICAgICAgICAgICAgc2VsZi50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaG9wTGlzdEl0ZW0nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBzZWxmLm9wZW5Gb290ZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RNYWluX19vcGVuJyk7XG4gICAgICAgICAgICBzZWxmLmZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEZvb3RlcicpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEZvb3Rlcl9faW5wdXQnKTtcbiAgICAgICAgICAgIHNlbGYuZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdEZvb3Rlcl9fZm9ybScpO1xuICAgICAgICAgICAgc2VsZi5zaG9wTGlzdCA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiB0aGVyZSBkYXRhIGluIGxvY2FsIHN0b3JhZ2UgYW5kIGxvYWQgaXRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbG9jYWxEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nob3BMaXN0Jyk7XG5cbiAgICAgICAgICAgIGlmIChsb2NhbERhdGEpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuc2hvcExpc3QgPSBKU09OLnBhcnNlKGxvY2FsRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudHMgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLm9wZW5Gb290ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLm9wZW5Gb290ZXIpO1xuICAgICAgICAgICAgc2VsZi5mb290ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLmNsb3NlRm9vdGVyKTtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBzZWxmLmhhbmRsZUtleVVwKTtcbiAgICAgICAgICAgIHNlbGYuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzZWxmLnN1Ym1pdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgZm9vdGVyIHdpdGggaW5wdXQgZmllbGRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLm9wZW5Gb290ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0X3N0YXRlX2FkZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbG9zZSBmb290ZXIgaWYgY2xpY2sgb3V0c2lkZSBvZiBmb290ZXIgaW5wdXRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmNsb3NlRm9vdGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBzZWxmLmZvb3RlciAmJiBzZWxmLmlucHV0LnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvcExpc3Rfc3RhdGVfYWRkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIGlucHV0IHZhbHVlIGxlbmd0aCA+IDAgYW5kIGNoYW5nZSBjb250YWluZXIgc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzZWxmLmlucHV0LnZhbHVlO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBsZW5ndGggPiAwID8gJ2FkZCcgOiAncmVtb3ZlJztcblxuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0W21ldGhvZF0oJ3Nob3BMaXN0X3N0YXRlX3ZhbGlkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24uIEFkZCBuZXcgaXRlbSB0byBzaG9wIGxpc3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnN1Ym1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2VsZi5pbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNob3BMaXN0TGVuZ3RoID0gc2VsZi5zaG9wTGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaWQgPSBzaG9wTGlzdExlbmd0aCA9PT0gMCA/IDAgOiBzaG9wTGlzdExlbmd0aCArIDE7XG4gICAgICAgICAgICB2YXIgaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHNlbGYuc2hvcExpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICBpc09wZW46IGlzT3BlblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNlbGYucmVzZXQoKTtcbiAgICAgICAgICAgIHNlbGYucmVuZGVyKCk7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUxvY2FsU3RvcmFnZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXNldCBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5mb3JtLnJlc2V0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciBzaG9wIGxpc3RcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgICAgICAgICAgY29udGVudExpc3QuY2xhc3NMaXN0LmFkZCgnc2hvcExpc3RNYWluX19saXN0Jyk7XG5cbiAgICAgICAgICAgIHNlbGYuc2hvcExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hvcExpc3RNYWluX19pdGVtJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzZWxmLnRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RJdGVtJykuaWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0SXRlbV9fY29udGVudCcpLmlubmVySFRNTCA9IGl0ZW0udGl0bGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc09wZW4pIHtcblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0SXRlbV9zdGF0ZV9vcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGVudExpc3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudExpc3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgbG9jYWwgc3RvcmFnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi51cGRhdGVMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHNlbGYuc2hvcExpc3QpO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2hvcExpc3QnLCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyKCk7XG4gICAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7XG4gICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgc2hvcExpc3QgPSBuZXcgU2hvcExpc3QoKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2hvcExpc3QuaW5pdCgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2hvcExpc3QuaW5pdCgpO1xuICAgIH0pO1xufSkoKTsiLCIoKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2hvcExpc3QgY2xhc3MuXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgY29uc3QgU2hvcExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCBvcHRpb25zIGZvciBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZ2V0T3B0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0Jyk7XG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RNYWluX19jb250ZW50Jyk7XG4gICAgICAgICAgICBzZWxmLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Nob3BMaXN0SXRlbScpLmlubmVySFRNTDtcbiAgICAgICAgICAgIHNlbGYub3BlbkZvb3RlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wTGlzdE1haW5fX29wZW4nKTtcbiAgICAgICAgICAgIHNlbGYuZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0Rm9vdGVyJyk7XG4gICAgICAgICAgICBzZWxmLmlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0Rm9vdGVyX19pbnB1dCcpO1xuICAgICAgICAgICAgc2VsZi5mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0Rm9vdGVyX19mb3JtJyk7XG4gICAgICAgICAgICBzZWxmLnNob3BMaXN0ID0gW107XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIHRoZXJlIGRhdGEgaW4gbG9jYWwgc3RvcmFnZSBhbmQgbG9hZCBpdFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5sb2FkRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nob3BMaXN0Jyk7XG5cbiAgICAgICAgICAgIGlmIChsb2NhbERhdGEpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuc2hvcExpc3QgPSBKU09OLnBhcnNlKGxvY2FsRGF0YSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50cyBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYub3BlbkZvb3RlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYub3BlbkZvb3Rlcik7XG4gICAgICAgICAgICBzZWxmLmZvb3Rlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYuY2xvc2VGb290ZXIpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHNlbGYuaGFuZGxlS2V5VXApO1xuICAgICAgICAgICAgc2VsZi5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHNlbGYuc3VibWl0KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyBmb290ZXIgd2l0aCBpbnB1dCBmaWVsZFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYub3BlbkZvb3RlciA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0X3N0YXRlX2FkZCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbG9zZSBmb290ZXIgaWYgY2xpY2sgb3V0c2lkZSBvZiBmb290ZXIgaW5wdXRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmNsb3NlRm9vdGVyID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gc2VsZi5mb290ZXIgJiYgc2VsZi5pbnB1dC52YWx1ZS5sZW5ndGggPT09IDApIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3BMaXN0X3N0YXRlX2FkZCcpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIGlucHV0IHZhbHVlIGxlbmd0aCA+IDAgYW5kIGNoYW5nZSBjb250YWluZXIgc3RhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaGFuZGxlS2V5VXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNlbGYuaW5wdXQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSBsZW5ndGggPiAwID8gJ2FkZCcgOiAncmVtb3ZlJztcblxuICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0W21ldGhvZF0oJ3Nob3BMaXN0X3N0YXRlX3ZhbGlkJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24uIEFkZCBuZXcgaXRlbSB0byBzaG9wIGxpc3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnN1Ym1pdCA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2VsZi5pbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNob3BMaXN0TGVuZ3RoID0gc2VsZi5zaG9wTGlzdC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHNob3BMaXN0TGVuZ3RoID09PSAwID8gMCA6IHNob3BMaXN0TGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGNvbnN0IGlzT3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICBzZWxmLnNob3BMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgaXNPcGVuOiBpc09wZW5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLnJlc2V0KCk7XG4gICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICAgICAgc2VsZi51cGRhdGVMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVzZXQgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuZm9ybS5yZXNldCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXIgc2hvcCBsaXN0XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgICAgICBjb250ZW50TGlzdC5jbGFzc0xpc3QuYWRkKCdzaG9wTGlzdE1haW5fX2xpc3QnKTtcblxuICAgICAgICAgICAgc2VsZi5zaG9wTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hvcExpc3RNYWluX19pdGVtJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzZWxmLnRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvcExpc3RJdGVtJykuaWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNob3BMaXN0SXRlbV9fY29udGVudCcpLmlubmVySFRNTCA9IGl0ZW0udGl0bGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc09wZW4pIHtcblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3BMaXN0SXRlbV9zdGF0ZV9vcGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZW50TGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50TGlzdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnVwZGF0ZUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHNlbGYuc2hvcExpc3QpO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2hvcExpc3QnLCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBtb2R1bGVcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW5pdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuZ2V0T3B0aW9ucygpO1xuICAgICAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyKCk7XG4gICAgICAgICAgICBzZWxmLmxvYWREYXRhKCk7XG4gICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCBzaG9wTGlzdCA9IG5ldyBTaG9wTGlzdCgpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiBzaG9wTGlzdC5pbml0KCkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4gc2hvcExpc3QuaW5pdCgpKTtcbn0pKCk7XG4iXX0=
